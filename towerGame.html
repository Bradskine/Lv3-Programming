<!DOCTYPE html>

<title>Game</title>

<meta charset="utf-8">

</head>

<body>
  <canvas id="gameCanvas" width="600" height="600"></canvas>
  <script type="text/javascript">
    var canvas, ctx;

    window.onload = function() {
      canvas = document.getElementById('gameCanvas');
      ctx = canvas.getContext('2d');
      // resizeCanvas();
      canvas.addEventListener("mousedown", function(evt) {
        getMousePosition(canvas, evt);
        console.log(mouseX, mouseY);
      });

      setInterval(mainloop, 1000 / 50);



    } // end of onloead function()



    var mouseX, mouseY;

    function getMousePosition(canvas, evt) {
      var rect = canvas.getBoundingClientRect();
      mouseX = event.clientX - rect.left;
      mouseY = event.clientY - rect.top;
    } //end of getMOusdePos funtion ()


    var track = ['right', 'up', 'up', 'up', 'up', 'right', 'right', 'right', 'right', 'right', 'right',
      'right', 'down', 'down', 'down', 'down', 'down', 'down', 'left', 'left', 'left', 'left', 'down','up', 'up', 'up', 'up', 'up', 'right', 'right', 'right', 'right', 'right', 'right',
      'down', 'down', 'down',
    ];

    var track2 = ['right','down','up', 'up', 'up', 'up', 'up', 'right', 'right', 'right', 'right', 'right', 'right',
    'down', 'down', 'down', 'down', 'down', 'down', 'left', 'left', 'up', 'up', 'up', 'left', 'left',
     'down', 'down','down'
   ];


    var currentTrack = '';
    var gameActive = false;

    function mainloop() {

      colorRect(0, 0, canvas.width, canvas.height, 'blue');
      drawGrid(canvas.width, canvas.height, 'grid');

      if (gameActive == false) {
        currentTrack = track2;
        gameActive = true;
      }

      drawTrack();
     drawCircles();


    } //end of mainloop function()

    //grid variables
    var gridCount = 12;
    // cavas.height and width are 600
    var TotalGridSize = 600;
    var gridSize = TotalGridSize / gridCount;



    var trackWidth = gridSize;

    var trackL = '';
    var gridAmount = '';
    var gridDirection = '';
    var xa = 0; //xa and ya used for track cooradanets
    var ya = TotalGridSize / 2 - gridSize;
    var xa2 = 0; //the 2nd one is for starting x,y
    var ya2 = TotalGridSize / 2 - gridSize;



    function drawTrack() { // to draw the track

       trackL = currentTrack.length;
       gridAmount = currentTrack.length;
      ctx.strokeStyle = 'rgb(7,7,7)';
      ctx.lineWidth = trackWidth;


      ctx.beginPath();
      ctx.moveTo(xa2, ya2);



      for (a = gridAmount; a < gridAmount * 2; a++) {
        var i = a - gridAmount;
        // console.log(i);

        gridDirection = currentTrack[i];
        if (gridDirection == 'up') {
          currentTrack[i] = [xa, ya - gridSize];
          ya -= gridSize;
        } else if (gridDirection == 'down') {
          currentTrack[i] = [xa, ya + gridSize];
          ya += gridSize
        } else if (gridDirection == 'left') {
          currentTrack[i] = [xa - gridSize, ya];
          xa -= gridSize;
        } else if (gridDirection == 'right') {
          currentTrack[i] = [xa + gridSize, ya];
          xa += gridSize
        }
      }
      gridAmount = 0;


      for (var a = 0; a < trackL; a++) {
        console.log(i);
        var i=  a;
        ctx.lineTo(currentTrack[i][0], currentTrack[i][1]);
      }
      i = i - trackL;

      ctx.stroke();


    } //end of draw Track

    var drawGrid = function(w, h, id) {


      var vStep = canvas.height / gridCount;
      var hStep = canvas.width / gridCount;

      ctx.canvas.width = w;
      ctx.canvas.height = h;


      for (x = 0; x <= w; x += hStep) { //drawas a line for entrei height width gaps of hstep
        ctx.moveTo(x, 0);
        ctx.lineTo(x, h);

        for (y = 0; y <= h; y += vStep) { //draws horizalt lines with vStep gaps
          var d = x % 150;
          ctx.moveTo(0, y);
          ctx.lineTo(w, y);
        }
      }

      ctx.strokeStyle = "rgb(150,150,150, 0.5)";

      ctx.stroke();


    }; //end of drawGrid Funtion()


var ballX = 200;
var ballY = 200;
var ballR =gridSize/5;
var ballC = 'green';
var ballBorderW= gridSize/10;
var ballBorderC='white';

function drawCircles() {
drawCircle(ballX,ballY,ballR,ballC,ballBorderW,ballBorderC);


}



    function colorRect(x, y, w, h, c) { //to draw things
      ctx.fillStyle = c;
      ctx.fillRect(x, y, w, h);
    } //end of colorRect

   function drawCircle(x,y, radius,c,borderWidth, borderColor) {
     ctx.strokeStyle = borderColor;
     ctx.lineWidth = borderWidth;
     ctx.fillStyle = c;
     ctx.beginPath();
     ctx.arc(x,y,radius,0,2*Math.PI);
      ctx.stroke();
      ctx.fill();

   }

  </script>

</body>


<style>
  * {
    margin: 0;
    padding: 0;
  }

  /* canvas {
    width: 650px;
    height: 650px;
  } */
</style>
